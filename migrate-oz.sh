#!/usr/bin/env bash

echo "Deploying StampCollectible contract..."
CONTRACT_ADDR=$(oz create StampCollectible -n development --init initialize --args 10,255,1000000000000,"StampCollectible","STAMP" | tail -1)
echo "StampCollectible deployed at " $CONTRACT_ADDR

echo "Funding the Prize pot..."
oz transfer -n development --to $CONTRACT_ADDR --value 2 --unit ether --no-interactive

echo "Current Prize pot balance..."
oz balance -n development $CONTRACT_ADDR

echo "Minting some NFTs..."
echo "Minting some NFTs...(1)"
oz send-tx --to $CONTRACT_ADDR -n development --method mint --args 100,'0x68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f73616e7474656567742f66696e616c2d70726f6a6563742d737072696e6731392f6d61737465722f7265736f75726365732f7374616d70732f7374616d702d30322e706e67'
echo "Minting some NFTs...(2)"
oz send-tx --to $CONTRACT_ADDR -n development --method mint --args 100,'0x68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f73616e7474656567742f66696e616c2d70726f6a6563742d737072696e6731392f6d61737465722f7265736f75726365732f7374616d70732f7374616d702d30332e706e67'
echo "Minting some NFTs...(3)"
oz send-tx --to $CONTRACT_ADDR -n development --method mint --args 100,'0x68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f73616e7474656567742f66696e616c2d70726f6a6563742d737072696e6731392f6d61737465722f7265736f75726365732f7374616d70732f7374616d702d30342e706e67'
echo "Minting some NFTs...(4)"
oz send-tx --to $CONTRACT_ADDR -n development --method mint --args 100,'0x68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f73616e7474656567742f66696e616c2d70726f6a6563742d737072696e6731392f6d61737465722f7265736f75726365732f7374616d70732f7374616d702d30352e706e67'
echo "Minting some NFTs...(5)"
oz send-tx --to $CONTRACT_ADDR -n development --method mint --args 100,'0x68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f73616e7474656567742f66696e616c2d70726f6a6563742d737072696e6731392f6d61737465722f7265736f75726365732f7374616d70732f7374616d702d30362e706e67'
echo "Minting some NFTs...(Done)"

echo "Migration completed"
